<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
  <script src="beluga.js"></script>

  <title>Document</title>
</head>

<body>

  <div class="container">Curso de JS</div>

  <section>
    <div class="container js-tabela">
      <h2>Média dos alunos</h2>
      <table class="table">
        <thead>
          <tr>
            <th>Nome</th>
            <th>Nota 1</th>
            <th>Nota 2</th>
            <th>Nota 3</th>
            <th>Nota 4</th>
            <th>Média</th>
          </tr>
        </thead>
        <tbody>
          <tr class="aluno">
            <td class="aluno-nome">Gertrude</td>
            <td class="aluno-n1">10</td>
            <td class="aluno-n2">8.5</td>
            <td class="aluno-n3">9</td>
            <td class="aluno-n4">7.5</td>
            <td class="aluno-m"></td>
          </tr>

          <tr class="aluno">
            <td class="aluno-nome">Rey</td>
            <td class="aluno-n1">5</td>
            <td class="aluno-n2">6.5</td>
            <td class="aluno-n3">8</td>
            <td class="aluno-n4">4.5</td>
            <td class="aluno-m"></td>
          </tr>

          <tr class="aluno">
            <td class="aluno-nome">Julian</td>
            <td class="aluno-n1">7</td>
            <td class="aluno-n2">8.5</td>
            <td class="aluno-n3">7.5</td>
            <td class="aluno-n4">6.5</td>
            <td class="aluno-m"></td>
          </tr>
        </tbody>
      </table>
    </div>
  </section>



  <script>

    (function () {
      var trs = document.querySelectorAll('.js-tabela tbody .aluno')

      var x = 0

      var linhaAluno
      var tds

      while (trs[x]) {
        linhaAluno = trs[x]
        console.log(linhaAluno)

        tds = linhaAluno.querySelectorAll('td')

        var notas = recuperarNumerosDeColunas(tds)


        media = calcularMedia.apply(this, notas)//chama a função do beluga.js mas passando os elementos do array como parametro

        linhaAluno.querySelector('.aluno-m').textContent = media

        x++
      }


      function recuperarNumerosDeColunas(tds) {
        var x = 0
        var arr = []
        while (tds[x]) {

          if (!isNaN(tds[x].textContent) && tds[x].textContent !== '') {
            arr.push(parseFloat(tds[x].textContent))
          }
          x++
        }
        return arr
      }


    })()
  </script>

</body>

</html>